<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="Spring5 框架">
<meta property="og:type" content="website">
<meta property="og:title" content="Spring框架">
<meta property="og:url" content="https://mulingl.github.io/note/Spring5%20%E6%A1%86%E6%9E%B6.html">
<meta property="og:site_name" content="沐凌の茶舍">
<meta property="og:description" content="Spring5 框架">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/utils.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/空间名称.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/事务操作环境.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/事务参数配置.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/事务传播行为.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/解决读问题.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/比较SpringMVC.png">
<meta property="og:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/启动端口号.png">
<meta property="article:published_time" content="2022-06-25T04:48:11.913Z">
<meta property="article:modified_time" content="2022-06-25T04:48:11.913Z">
<meta property="article:author" content="mll">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:/Users/沐凌零/AppData/Local/Programs/Typora/img/utils.png"><title>Spring框架 | 沐凌の茶舍</title><link ref="canonical" href="https://mulingl.github.io/note/Spring5%20%E6%A1%86%E6%9E%B6.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script src="/live2d-widget-main/autoload.js"></script><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 6.2.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">归档</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-pen"></i></span><span class="header-nav-menu-item__text">随笔</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/note/"><span class="header-nav-submenu-item__icon"><i class="fas fa-comment-alt"></i></span><span class="header-nav-submenu-item__text">笔记</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/insight/"><span class="header-nav-submenu-item__icon"><i class="fas fa-burn"></i></span><span class="header-nav-submenu-item__text">心得</span></a></div></div></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">沐凌の茶舍</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><div class="custompage">
        <h1 id="Spring5-框架"   >
          <a href="#Spring5-框架" class="heading-link"><i class="fas fa-link"></i></a><a href="#Spring5-框架" class="headerlink" title="Spring5 框架"></a><strong>Spring5</strong> <strong>框架</strong></h1>
      <span id="more"></span>

        <h2 id="一、Spring框架概述"   >
          <a href="#一、Spring框架概述" class="heading-link"><i class="fas fa-link"></i></a><a href="#一、Spring框架概述" class="headerlink" title="一、Spring框架概述"></a>一、Spring框架概述</h2>
      <p>1、Spring 是轻量级的开源的 JavaEE 框架</p>
<p>2、Spring 可以解决企业应用开发的复杂性</p>
<p>3、Spring 有两个核心部分：IOC 和 Aop</p>
<p>​	（1）IOC：控制反转，把创建对象过程交给 Spring 进行管理</p>
<p>​	（2）Aop：面向切面，不修改源代码进行功能增强</p>
<p>4、Spring 特点</p>
<p>（1）方便解耦，简化开发</p>
<p>（2）Aop 编程支持</p>
<p>（3）方便程序测试</p>
<p>（4）方便和其他框架进行整合</p>
<p>（5）方便进行事务操作</p>
<p>（6）降低 API 开发难度</p>
<p>5、现在课程中，选取 Spring 版本 5.x</p>

        <h2 id="二、IOC容器"   >
          <a href="#二、IOC容器" class="heading-link"><i class="fas fa-link"></i></a><a href="#二、IOC容器" class="headerlink" title="二、IOC容器"></a>二、IOC容器</h2>
      
        <h3 id="1-IOC概念和原理"   >
          <a href="#1-IOC概念和原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-IOC概念和原理" class="headerlink" title="1.IOC概念和原理"></a>1.<strong>IOC</strong>概念和原理</h3>
      <p>1、什么是 IOC</p>
<p>（1）控制反转，把对象创建和对象之间的调用过程，交给 Spring 进行管理</p>
<p>（2）使用 IOC 目的：为了耦合度降低</p>
<p>（3）做入门案例就是 IOC 实现</p>
<p>2、IOC 底层原理</p>
<p>（1）xml 解析、工厂模式、反射</p>
<p>3、画图讲解 IOC 底层原理</p>
<p>​	IOC过程</p>
<p>①配置xml文件，配置创建的对象</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.UserDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>②有service类h和dao类，创建工厂类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserPactory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title function_">getDao</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">classValue</span> <span class="operator">=</span> classValue;<span class="comment">//1.xml解析</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(classValue);<span class="comment">//2.通过反射创建对象</span></span><br><span class="line">        <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-BeanFactory接口"   >
          <a href="#2-BeanFactory接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-BeanFactory接口" class="headerlink" title="2.BeanFactory接口"></a>2.BeanFactory接口</h3>
      <p>1、IOC 思想基于 IOC 容器完成，IOC 容器底层就是对象工厂</p>
<p>2、Spring 提供 IOC 容器实现两种方式：（两个接口）</p>
<p>​	（1）BeanFactory：IOC 容器基本实现，是 Spring 内部的使用接口，不提供开发人员进行使用</p>
<p>​	加载配置文件时候不会创建对象，在获取对象（使用）才去创建对象</p>
<p>​	（2）ApplicationContext：BeanFactory 接口的子接口，提供更多更强大的功能，一般由开发人员进行使用</p>
<p>​	 加载配置文件时候就会把在配置文件对象进行创建</p>

        <h3 id="3-IOC操作Bean管理"   >
          <a href="#3-IOC操作Bean管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-IOC操作Bean管理" class="headerlink" title="3.IOC操作Bean管理"></a>3.IOC操作Bean管理</h3>
      
        <h4 id="3-1概念"   >
          <a href="#3-1概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-1概念" class="headerlink" title="3.1概念"></a>3.1概念</h4>
      
        <h5 id="1、什么是-Bean-管理"   >
          <a href="#1、什么是-Bean-管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、什么是-Bean-管理" class="headerlink" title="1、什么是 Bean 管理"></a><strong>1、什么是</strong> <strong>Bean</strong> <strong>管理</strong></h5>
      <p>（0）Bean 管理指的是两个操作</p>
<p>（1）Spring 创建对象</p>
<p>（2）Spirng 注入属性</p>

        <h5 id="2、Bean-管理操作有两种方式"   >
          <a href="#2、Bean-管理操作有两种方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、Bean-管理操作有两种方式" class="headerlink" title="2、Bean 管理操作有两种方式"></a>2、Bean 管理操作有两种方式</h5>
      <p>（1）基于 xml 配置文件方式实现</p>
<p>（2）基于注解方式实现</p>

        <h4 id="3-2基于-xml-方式"   >
          <a href="#3-2基于-xml-方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2基于-xml-方式" class="headerlink" title="3.2基于 xml 方式"></a>3.2<strong>基于</strong> <strong>xml</strong> <strong>方式</strong></h4>
      
        <h5 id="1-创建对象"   >
          <a href="#1-创建对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建对象" class="headerlink" title="1.创建对象"></a>1.创建对象</h5>
      <figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cpm.atguigu.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>​	（1）在 spring 配置文件中，使用 bean 标签，标签里面添加对应属性，就可以实现对象创建</p>
<p>​	（2）在 bean 标签有很多属性，介绍常用的属性</p>
<p>​				id 属性：唯一标识</p>
<p>​				class 属性：类全路径（包类路径）</p>
<p>（3）创建对象时候，默认也是执行无参数构造方法完成对象创建</p>

        <h5 id="2-注入属性"   >
          <a href="#2-注入属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-注入属性" class="headerlink" title="2.注入属性"></a>2.注入属性</h5>
      
        <h6 id="2-1使用set方法进行注入"   >
          <a href="#2-1使用set方法进行注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-1使用set方法进行注入" class="headerlink" title="2.1使用set方法进行注入"></a>2.1使用set方法进行注入</h6>
      <p>（1）创建类，定义属性和对应的set方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line">    <span class="comment">//创建属性</span></span><br><span class="line">    <span class="keyword">private</span> String bname;</span><br><span class="line">    <span class="keyword">private</span> String bauthor;</span><br><span class="line">	 <span class="comment">//创建属性对应的 set 方法</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBname</span><span class="params">(String bname)</span> &#123;</span><br><span class="line"> 		<span class="built_in">this</span>.bname = bname;</span><br><span class="line">    &#125;</span><br><span class="line">	 <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBauthor</span><span class="params">(String bauthor)</span> &#123;</span><br><span class="line"> 		<span class="built_in">this</span>.bauthor = bauthor;</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）在 spring 配置文件配置对象创建，配置属性注入</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--2 set 方法注入属性--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Book&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--使用 property 完成属性注入</span></span><br><span class="line"><span class="comment"> 		name：类里面属性名称</span></span><br><span class="line"><span class="comment"> 		value：向属性注入的值</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;易筋经&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bauthor&quot;</span> <span class="attr">value</span>=<span class="string">&quot;达摩老祖&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h6 id="2-2使用有参数构造进行注入"   >
          <a href="#2-2使用有参数构造进行注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-2使用有参数构造进行注入" class="headerlink" title="2.2使用有参数构造进行注入"></a>2.2<strong>使用有参数构造进行注入</strong></h6>
      <p>（1）创建类，定义属性，创建属性对应有参数构造方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line"> 	<span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line"> 	<span class="keyword">private</span> String address;</span><br><span class="line"> 	<span class="comment">//有参数构造</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">(String oname,String address)</span> &#123;</span><br><span class="line"> 	<span class="built_in">this</span>.oname = oname;</span><br><span class="line"> 	<span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）在 spring 配置文件中进行配置</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;电脑&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;China&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h6 id="2-3p-名称空间注入（了解）"   >
          <a href="#2-3p-名称空间注入（了解）" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-3p-名称空间注入（了解）" class="headerlink" title="2.3p 名称空间注入（了解）"></a>2.3<strong>p</strong> <strong>名称空间注入（了解）</strong></h6>
      <p>（1）使用 p 名称空间注入，可以简化基于 xml 配置方式</p>
<p>​	第一步 添加 p 名称空间在配置文件中</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframwork.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http&gt;&lt;/bean&gt;</span></span></span><br></pre></td></tr></table></div></figure>

<p>第二步 进行属性注入，在 bean 标签里面进行操作</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.Book&quot;</span> <span class="attr">p:bname</span>=<span class="string">&quot;九阳神功&quot;</span> <span class="attr">p:bauthor</span>=<span class="string">&quot;无名氏&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h6 id="3-3xml-注入其他类型属性"   >
          <a href="#3-3xml-注入其他类型属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-3xml-注入其他类型属性" class="headerlink" title="3.3xml 注入其他类型属性"></a>3.3<strong>xml</strong> <strong>注入其他类型属性</strong></h6>
      
        <h5 id="1、字面量"   >
          <a href="#1、字面量" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、字面量" class="headerlink" title="1、字面量"></a><strong>1</strong>、字面量</h5>
      <p>（1）null 值</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>（2）属性值包含特殊符号</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--属性值包含特殊符号</span></span><br><span class="line"><span class="comment"> 1 把&lt;&gt;进行转义 &amp;lt; &amp;gt;</span></span><br><span class="line"><span class="comment"> 2 把带特殊符号内容写到 CDATA</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h5 id="2、注入属性外部-bean"   >
          <a href="#2、注入属性外部-bean" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、注入属性外部-bean" class="headerlink" title="2、注入属性外部 bean"></a><strong>2</strong>、注入属性外部 <strong>bean</strong></h5>
      <p>（1）创建两个类 service 类和 dao 类 </p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span><span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.service.UserService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入 userDao 对象</span></span><br><span class="line"><span class="comment"> 		name 属性：类里面属性名称</span></span><br><span class="line"><span class="comment"> 		ref 属性：创建 userDao 对象 bean 标签 id 值</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.dao.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br></pre></td></tr></table></div></figure>

<p>（2）在 service 调用 dao 里面的方法</p>
<p>（3）在 spring 配置文件中进行配置</p>

        <h5 id="3、注入属性内部-bean"   >
          <a href="#3、注入属性内部-bean" class="heading-link"><i class="fas fa-link"></i></a><a href="#3、注入属性内部-bean" class="headerlink" title="3、注入属性内部 bean"></a><strong>3</strong>、注入属性内部 <strong>bean</strong></h5>
      
        <h5 id="4、注入属性-级联赋值"   >
          <a href="#4、注入属性-级联赋值" class="heading-link"><i class="fas fa-link"></i></a><a href="#4、注入属性-级联赋值" class="headerlink" title="4、注入属性-级联赋值"></a><strong>4、注入属性-级联赋值</strong></h5>
      <p><strong>（</strong>1）第一种写法</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Dept&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;财务部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>（2）第二种写法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//员工属于某个部门，使用对象形式表示</span></span><br><span class="line"><span class="keyword">private</span> Dept dept;</span><br><span class="line"><span class="comment">//生成dept的get方法</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置两个普通属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lucy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--级联赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;技术部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.bean.Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;财务部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h5 id="5-xml-注入集合属性"   >
          <a href="#5-xml-注入集合属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-xml-注入集合属性" class="headerlink" title="5.xml 注入集合属性"></a>5.xml <strong>注入集合属性</strong></h5>
      <p><strong>1</strong>、注入数组类型属性</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">value</span>&gt;</span>java 课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">value</span>&gt;</span>数据库课程<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>



<p><strong>2</strong>、注入 <strong>List</strong> <strong>集合类型属性</strong></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">value</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> 	 	<span class="tag">&lt;<span class="name">value</span>&gt;</span>小三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>



<p><strong>3、注入</strong> <strong>Map</strong> <strong>集合类型属性</strong></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;JAVA&quot;</span> <span class="attr">value</span>=<span class="string">&quot;java&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;PHP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></div></figure>



<p>4.<em>set 类型属性注入</em></p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">value</span>&gt;</span>MySQL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>Redis<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>



<p><strong>5</strong>、把集合注入部分提取出来</p>
<p>（1）在 spring 配置文件中引入名称空间 util</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\utils.png"></p>
<p>（2）使用 util 标签完成 list 集合注入提取</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 提取 list 集合类型属性注入--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>易筋经<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">value</span>&gt;</span>九阴真经<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2 提取 list 集合类型属性注入使用--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.collectiontype.Book&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h5 id="6-FactoryBean"   >
          <a href="#6-FactoryBean" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-FactoryBean" class="headerlink" title="6.FactoryBean"></a>6.<strong>FactoryBean</strong></h5>
      <p>​	<strong>1</strong>、Spring <strong>有两种类型</strong> <strong>bean</strong>，一种普通 <strong>bean</strong>，另外一种工厂 bean（FactoryBean）</p>
<p>​	2<strong>、普通</strong>bean**：在配置文件中定义 **bean <strong>类型就是返回类型</strong></p>
<p>​	<strong>3</strong>、工厂<strong>bean</strong>：在配置文件定义 <strong>bean</strong> <strong>类型可以和返回类型不一样</strong></p>
<p>​		第一步 创建类，让这个类作为工厂 bean，实现接口 FactoryBean</p>
<p>​		第二步 实现接口里面的方法，在实现的方法中定义返回的 bean 类型</p>

        <h5 id="7-bean作用域"   >
          <a href="#7-bean作用域" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-bean作用域" class="headerlink" title="7.bean作用域"></a>7.bean作用域</h5>
      <p>​	1、在Spring里面，设置创建 bean 实例是单实例还是多实例</p>
<p>​	2、在Spring 里面，默认情况下，bean 是单实例对象</p>
<p>​	3、如何设置单实例还是多实例</p>
<p>​		（1）在 spring 配置文件 bean 标签里面有属性（scope）用于设置单实例还是多实例</p>
<p>​		（2）scope 属性值</p>
<p>​					第一个值 默认值，singleton，表示是单实例对象</p>
<p>​					第二个值 prototype，表示是多实例对象</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>（3）singleton 和 prototype 区别</p>
<p>​		第一 singleton 单实例，prototype 多实例</p>
<p>​		第二 设置 scope 值是 singleton 时候，加载 spring 配置文件时候就会创建单实例对象</p>
<p>​				 设置 scope 值是 prototype 时候，不是在加载 spring 配置文件时候创建 对象，在调用getBean 方法时候创建多实例对象</p>

        <h5 id="8-bean生命周期"   >
          <a href="#8-bean生命周期" class="heading-link"><i class="fas fa-link"></i></a><a href="#8-bean生命周期" class="headerlink" title="8.bean生命周期"></a>8.bean生命周期</h5>
      <p>1、生命周期</p>
<p>（1）从对象创建到对象销毁的过程</p>
<p>2、bean生命周期</p>
<p>​	（1）通过构造器创建 bean 实例（无参数构造）</p>
<p>​	（2）为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）</p>
<p>​	（3）调用 bean 的初始化的方法（需要进行配置初始化的方法）</p>
<p>​	（4）bean 可以使用了（对象获取到了）</p>
<p>​	（5）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>
<p><strong>3</strong>、演示 bean生命周期</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="comment">//无参数构造</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="title function_">Orders</span><span class="params">()</span> &#123;</span><br><span class="line"> 	System.out.println(<span class="string">&quot;第一步 执行无参数构造创建 bean 实例&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="keyword">private</span> String oname;</span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOname</span><span class="params">(String oname)</span> &#123;</span><br><span class="line"> 		<span class="built_in">this</span>.oname = oname;</span><br><span class="line"> 		System.out.println(<span class="string">&quot;第二步 调用 set 方法设置属性值&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="comment">//创建执行的初始化的方法</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> 		System.out.println(<span class="string">&quot;第三步 执行初始化的方法&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="comment">//创建执行的销毁的方法</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyMethod</span><span class="params">()</span> &#123;</span><br><span class="line"> 	System.out.println(<span class="string">&quot;第五步 执行销毁的方法&quot;</span>);</span><br><span class="line"> 	&#125; 	</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBean3</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// ApplicationContext context =</span></span><br><span class="line"><span class="comment">// new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);</span></span><br><span class="line">    <span class="type">ClassPathXmlApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line"> 		<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean4.xml&quot;</span>);</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;orders&quot;</span>, Orders.class);</span><br><span class="line"> 	System.out.println(<span class="string">&quot;第四步 获取创建 bean 实例对象&quot;</span>);</span><br><span class="line"> 	System.out.println(orders);</span><br><span class="line"> 	<span class="comment">//手动让 bean 实例销毁</span></span><br><span class="line"> 	context.close();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>

<p>4、bean的后置处理器，bean生命周期有七步</p>
<p>（1）通过构造器创建 bean 实例（无参数构造）</p>
<p>（2）为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）</p>
<p>（3）把 bean 实例传递 bean 后置处理器的方法postProcessBeforeInitialization </p>
<p>（4）调用 bean 的初始化的方法（需要进行配置初始化的方法）</p>
<p>（5）把bean 实例传递 bean 后置处理器的方法postProcessAfterInitialization</p>
<p>（6）bean 可以使用了（对象获取到了）</p>
<p>（7）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>

        <h5 id="9-xml自动装配"   >
          <a href="#9-xml自动装配" class="heading-link"><i class="fas fa-link"></i></a><a href="#9-xml自动装配" class="headerlink" title="9.xml自动装配"></a>9.xml自动装配</h5>
      <p><strong>1</strong>、什么是自动装配</p>
<p>（1）根据指定装配规则（属性名称或者属性类型），Spring 自动将匹配的属性值进行注入</p>
<p><strong>2、演示自动装配过</strong></p>
<p>（1）根据属性名称自动注入</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配</span></span><br><span class="line"><span class="comment"> bean 标签属性 autowire:配置自动装配</span></span><br><span class="line"><span class="comment"> autowire 属性常用两个值：</span></span><br><span class="line"><span class="comment"> 	byName 根据属性名称注入 ，注入值 bean 的 id 值和类属性名称一样</span></span><br><span class="line"><span class="comment"> 	byType 根据属性类型注入</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.autowire.Dept&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>




        <h5 id="10-外部属性文件"   >
          <a href="#10-外部属性文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#10-外部属性文件" class="headerlink" title="10.外部属性文件"></a>10.外部属性文件</h5>
      <p>1、直接配置数据库信息</p>
<p>（1）配置德鲁伊连接池</p>
<p>（2）引入德鲁伊连接池依赖 jar 包</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/userDb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>2、引入外部属性文件配置数据库连接池</p>
<p>（1）创建外部属性文件，properties 格式文件，写数据库信息</p>
<p>（2）把外部 properties 属性文件引入到 spring 配置文件中</p>
<p>* 引入 context 名称空间</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\空间名称.png"></p>
<p>在 spring 配置文件使用标签引入外部属性文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置连接池--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.userName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>




        <h4 id="4-基于注解方式"   >
          <a href="#4-基于注解方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-基于注解方式" class="headerlink" title="4.基于注解方式"></a>4.基于注解方式</h4>
      
        <h5 id="1、什么是注解"   >
          <a href="#1、什么是注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、什么是注解" class="headerlink" title="1、什么是注解"></a>1、什么是注解</h5>
      <p>​	（1）注解是代码特殊标记，格式：@注解名称(属性名称&#x3D;属性值, 属性名称&#x3D;属性值..)</p>
<p>​	（2）使用注解，注解作用在类上面，方法上面，属性上面</p>
<p>​	（3）使用注解目的：简化 xml 配置</p>

        <h5 id="2、Spring针对-Bean-管理中创建对象提供注解"   >
          <a href="#2、Spring针对-Bean-管理中创建对象提供注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、Spring针对-Bean-管理中创建对象提供注解" class="headerlink" title="2、Spring针对 Bean 管理中创建对象提供注解"></a>2、Spring针对 Bean 管理中创建对象提供注解</h5>
      <p>​	（1）@Component（成分）				标注一个普通的spring Bean类</p>
<p>​	（2）@Service（服务）						标注一个业务逻辑组件类</p>
<p>​	（3）@Controller(控制器)					标注一个控制器组件类</p>
<p>​	（4）@Repository（仓库）				 标注一个DAO组件类</p>
<p>上面四个注解功能是一样的，都可以用来创建 bean 实例</p>
<p>用法相同，功能相同，区别在于标识组件的类型</p>

        <h5 id="3、基于注解方式实现对象创建"   >
          <a href="#3、基于注解方式实现对象创建" class="heading-link"><i class="fas fa-link"></i></a><a href="#3、基于注解方式实现对象创建" class="headerlink" title="3、基于注解方式实现对象创建"></a>3、基于注解方式实现对象创建</h5>
      <p>第一步 引入依赖</p>
<p>第二步 开启组件扫描</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描</span></span><br><span class="line"><span class="comment"> 1 如果扫描多个包，多个包使用逗号隔开</span></span><br><span class="line"><span class="comment"> 2 扫描包上层目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">第三步 创建类，在类上面添加创建对象注解</span><br><span class="line"><span class="comment">//在注解里面 value 属性值可以省略不写，</span></span><br><span class="line"><span class="comment">//默认值是类名称，首字母小写</span></span><br><span class="line"><span class="comment">//UserService -- userService</span></span><br><span class="line"><span class="meta">@Component(value = &quot;userService&quot;)</span> <span class="comment">//&lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>


        <h5 id="4-开启组件扫描细节配置"   >
          <a href="#4-开启组件扫描细节配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-开启组件扫描细节配置" class="headerlink" title="4.开启组件扫描细节配置"></a>4.开启组件扫描细节配置</h5>
      <figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例 1</span></span><br><span class="line"><span class="comment"> use-default-filters=&quot;false&quot; 表示现在不使用默认 filter，自己配置 filter</span></span><br><span class="line"><span class="comment"> context:include-filter ，设置扫描哪些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例 2</span></span><br><span class="line"><span class="comment"> 下面配置扫描包所有内容</span></span><br><span class="line"><span class="comment"> context:exclude-filter： 设置哪些内容不进行扫描</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h5 id="5-基于注解方式实现属性注入"   >
          <a href="#5-基于注解方式实现属性注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-基于注解方式实现属性注入" class="headerlink" title="5.基于注解方式实现属性注入"></a>5.基于注解方式实现属性注入</h5>
      <p>（1）@Autowired：根据属性类型进行自动装配</p>
<p>​	第一步 把 service 和 dao 对象创建，在 service 和 dao 类添加创建对象注解</p>
<p>​	第二步 在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> 	<span class="comment">//定义 dao 类型属性</span></span><br><span class="line"> 	<span class="comment">//不需要添加 set 方法</span></span><br><span class="line"> 	<span class="comment">//添加注入属性注解</span></span><br><span class="line"> 	<span class="meta">@Autowired</span> </span><br><span class="line"> 	<span class="keyword">private</span> UserDao userDao;</span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line"> 		System.out.println(<span class="string">&quot;service add.......&quot;</span>);</span><br><span class="line"> 		userDao.add();</span><br><span class="line"> 	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）@Qualifier：根据名称进行注入</p>
<p>​	这个@Qualifier 注解的使用，和上面@Autowired 一起使用</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	//定义 dao 类型属性</span><br><span class="line">	//不需要添加 set 方法</span><br><span class="line">	//添加注入属性注解</span><br><span class="line">	@Autowired //根据类型进行注入</span><br><span class="line">	@Qualifier(value = &quot;userDaoImpl1&quot;) //根据名称进行注入</span><br><span class="line">private UserDao userDao;</span><br></pre></td></tr></table></div></figure>

<p>（3）@Resource：可以根据类型注入，可以根据名称注入</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//@Resource //根据类型进行注入</span><br><span class="line">@Resource(name = &quot;userDaoImpl1&quot;) //根据名称进行注入</span><br><span class="line">private UserDao userDao;</span><br></pre></td></tr></table></div></figure>

<p>（4）@Value：注入普通类型属性</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(value = &quot;abc&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></div></figure>


        <h5 id="6、完全注解开发"   >
          <a href="#6、完全注解开发" class="heading-link"><i class="fas fa-link"></i></a><a href="#6、完全注解开发" class="headerlink" title="6、完全注解开发"></a><strong>6、完全注解开发</strong></h5>
      <p>（1）创建配置类，替代 xml 配置文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Configuration //作为配置类，替代 xml 配置文件</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span><br><span class="line">public class SpringConfig &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）编写测试类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testService2</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="comment">//加载配置类</span></span><br><span class="line"> 	<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> newAnnotationConfigApplicationContext(SpringConfig.class);</span><br><span class="line"> 	<span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, </span><br><span class="line">UserService.class);</span><br><span class="line"> 	System.out.println(userService);</span><br><span class="line"> 	userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h2 id="三、Aop"   >
          <a href="#三、Aop" class="heading-link"><i class="fas fa-link"></i></a><a href="#三、Aop" class="headerlink" title="三、Aop"></a>三、Aop</h2>
      
        <h3 id="1-概念"   >
          <a href="#1-概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3>
      <p><strong>1、什么是</strong> <strong>AOP</strong></p>
<p>​	（1）面向切面编程（方面），利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<p>​	（2）通俗描述：不通过修改源代码方式，在主干功能里面添加新功能</p>
<p>​	（3）使用登录例子说明 AOP</p>

        <h3 id="2-底层原理"   >
          <a href="#2-底层原理" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-底层原理" class="headerlink" title="2.底层原理"></a>2.底层原理</h3>
      <p><strong>1</strong>、AOP底层使用动态代理</p>
<p>（1）有两种情况动态代理</p>
<p>​	第一种 有接口情况，使用 JDK动态代理</p>
<p>​	第二种 没有接口情况，使用 CGLIB 动态代理</p>

        <h3 id="3-jdk动态带理"   >
          <a href="#3-jdk动态带理" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-jdk动态带理" class="headerlink" title="3.jdk动态带理"></a>3.jdk动态带理</h3>
      <p>1、使用 JDK 动态代理，使用 Proxy 类里面的方法创建代理对象、</p>
<p>（1）调用 newProxyInstance 方法</p>
<p>static Object			newProxyInstance(ClassLoader loader, 类&lt;?&gt;[] interfaces, InvocationHandlerh)</p>
<p>​										返回指定接口的代理类的实例，该接口将方法调用分派给指定的调用处理程序</p>
<p>方法有三个参数：</p>
<p>​	第一参数，类加载器</p>
<p>​	第二参数，增强方法所在的类，这个类实现的接口，支持多个接口</p>
<p>​	第三参数，实现这个接口 InvocationHandler，创建代理对象，写增强的部分</p>
<p>2.编写JDK动态代理代码</p>
<p>（1）创建接口，定义方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>;</span><br><span class="line"> 	<span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）创建接口实现类，实现方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"> 		<span class="keyword">return</span> a+b;</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(String id)</span> &#123;</span><br><span class="line"> 		<span class="keyword">return</span> id;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（3）使用 Proxy 类创建接口代理对象</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">	 <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> 		<span class="comment">//创建接口实现类代理对象</span></span><br><span class="line"> 		Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">    	<span class="type">UserDaoImpl</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line"> 		<span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span>  (UserDao)Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">         <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> dao.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"> 		System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">     &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建代理对象代码</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"> 	<span class="comment">//1 把创建的是谁的代理对象，把谁传递过来</span></span><br><span class="line"> 	<span class="comment">//有参数构造传递</span></span><br><span class="line">	 <span class="keyword">private</span> Object obj;</span><br><span class="line">	 <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">		 <span class="built_in">this</span>.obj = obj;</span><br><span class="line">     &#125;</span><br><span class="line"> 	<span class="comment">//增强的逻辑</span></span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"> 		<span class="comment">//方法之前</span></span><br><span class="line"> 		System.out.println(<span class="string">&quot;方法之前执行....&quot;</span>+method.getName()+<span class="string">&quot; :传递的参数...&quot;</span>+ Arrays.toString(args));</span><br><span class="line"> 		<span class="comment">//被增强的方法执行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line"> 		<span class="comment">//方法之后</span></span><br><span class="line"> 		System.out.println(<span class="string">&quot;方法之后执行....&quot;</span>+obj);</span><br><span class="line"> 		<span class="keyword">return</span> res;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-术语"   >
          <a href="#4-术语" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-术语" class="headerlink" title="4.术语"></a>4.术语</h3>
      <p>1.连接点</p>
<p>类的哪些方法可以被增强，这些方法称位连接点</p>
<p>2.切入点</p>
<p>实际被真正增强的方法，称为切入点</p>
<p>3.通知（增强）</p>
<p>（1）实际增强的逻辑部分称为通知（增强）</p>
<p>（2）通知类型</p>
<div class="table-container"><table>
<thead>
<tr>
<th>前置通知</th>
<th>@Before</th>
</tr>
</thead>
<tbody><tr>
<td>后置通知</td>
<td>@AfterReturning</td>
</tr>
<tr>
<td>环绕通知</td>
<td>@Around</td>
</tr>
<tr>
<td>异常通知</td>
<td>@AfterThrowing</td>
</tr>
<tr>
<td>最终通知</td>
<td>@After</td>
</tr>
</tbody></table></div>
<p>4.切面</p>

        <h3 id="5-准备工作"   >
          <a href="#5-准备工作" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-准备工作" class="headerlink" title="5.准备工作"></a>5.准备工作</h3>
      <p><strong>1</strong>、Spring框架一般都是基于AspectJ 实现AOP 操作</p>
<p>​	（1）AspectJ 不是 Spring 组成部分，独立 AOP 框架，一般把 AspectJ 和 Spirng 框架一起使用，进行 AOP 操作</p>
<p>**2、基于 **AspectJ <strong>实现</strong> <strong>AOP</strong> <strong>操作</strong></p>
<p>（1）基于 xml 配置文件实现</p>
<p>（2）基于注解方式实现（使用）</p>
<p><strong>4</strong>、切入点表达式</p>
<p>（1）切入点表达式作用：知道对哪个类里面的哪个方法进行增强</p>
<p>（2）语法结构： execution([权限修饰符] [返回类型] [类全路径] <a href="%5B%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%5D">方法名称</a> )</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//举例 1：对 com.atguigu.dao.BookDao 类里面的 add 进行增强</span></span><br><span class="line">execution(* com.atguigu.dao.BookDao.add(..))</span><br><span class="line"><span class="comment">//举例 2：对 com.atguigu.dao.BookDao 类里面的所有的方法进行增强</span></span><br><span class="line">execution(* com.atguigu.dao.BookDao.* (..))</span><br><span class="line"><span class="comment">//举例 3：对 com.atguigu.dao 包里面所有类，类里面所有方法进行增强</span></span><br><span class="line">execution(* com.atguigu.dao.*.* (..))</span><br></pre></td></tr></table></div></figure>


        <h3 id="6-AspectJ-注解"   >
          <a href="#6-AspectJ-注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-AspectJ-注解" class="headerlink" title="6.AspectJ 注解"></a>6.<strong>AspectJ</strong> 注解</h3>
      <p><strong>1</strong>、创建类，在类里面定义方法</p>
<p><strong>2</strong>、创建增强类（编写增强逻辑）</p>
<p><strong>3</strong>、进行通知的配置</p>
<p>​	（1）在 spring 配置文件中，开启注解扫描</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan,base-package=&quot;com.atguigu.spring5.aopanno&quot;&gt;<span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>​	（2）使用注解创建 User 和 UserProxy 对象</p>
<p>​	（3）在增强类上面添加注解 @Aspect</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>4</strong>、配置不同类型的通知</p>
<p>​	（1）在增强类的里面，在作为通知方法上面添加通知类型注解，使用切入点表达式配置</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增强的类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line"> 	<span class="comment">//前置通知/****</span></span><br><span class="line"> 	<span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line"> 	<span class="meta">@Before(value = &quot;execution(*com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">	 <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>5</strong>、相同的切入点抽取</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相同切入点抽取</span></span><br><span class="line"><span class="meta">@Pointcut(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointdemo</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//前置通知</span></span><br><span class="line"><span class="comment">//@Before 注解表示作为前置通知</span></span><br><span class="line">	<span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before.........&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>6</strong>、有多个增强类多同一个方法进行增强，设置增强类优先级</p>
<p>（1）在增强类上面添加注解 @Order(数字类型值)，数字类型值越小优先级越高</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonProxy</span></span><br></pre></td></tr></table></div></figure>

<p><strong>7、完全使用注解开发</strong> </p>
<p><strong>（</strong>1）创建配置类，不需要创建 xml 配置文件</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//使用@Configuration 来注解类表示类可以被 Spring 的 IoC 容器所使用，作为 bean 定义的资源。</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAop</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="7-Aspectj配置文件"   >
          <a href="#7-Aspectj配置文件" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-Aspectj配置文件" class="headerlink" title="7.Aspectj配置文件"></a>7.Aspectj配置文件</h3>
      <p>1、创建两个类，增强类和被增强类，创建方法</p>
<p><strong>2</strong>、在spring 配置文件中创建两个类对象</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建对象--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.aopxml.Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookProxy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring5.aopxml.BookProxy&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>3.在spring配置文件中配置切入点</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置 aop 增强--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--切入点--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(*com.atguigu.spring5.aopxml.Book.buy(..))&quot;</span>/&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookProxy&quot;</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!--增强作用在具体的方法上--&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="四、jdbcTemplate"   >
          <a href="#四、jdbcTemplate" class="heading-link"><i class="fas fa-link"></i></a><a href="#四、jdbcTemplate" class="headerlink" title="四、jdbcTemplate"></a>四、jdbcTemplate</h2>
      
        <h3 id="1-概念和准备"   >
          <a href="#1-概念和准备" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-概念和准备" class="headerlink" title="1.概念和准备"></a>1.概念和准备</h3>
      <p><strong>1</strong>、什么是 <strong>JdbcTemplate</strong></p>
<p>（1）Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作</p>
<p><strong>2</strong>、准备工作</p>
<p>（1）引入相关 jar 包 </p>
<p>（2）在 spring 配置文件配置数据库连接池</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库连接池 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span> /&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>（3）配置 JdbcTemplate 对象，注入 DataSource</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JdbcTemplate 对象 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--注入 dataSource--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>(4）创建 service 类，创建 dao 类，在 dao 注入 jdbcTemplate 对象</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span> </span><br><span class="line">@Service</span><br><span class="line">@Service</span><br><span class="line">public class BookService &#123;</span><br><span class="line"> 	//注入 dao</span><br><span class="line">	@Autowired</span><br><span class="line"> 	private BookDao bookDao; </span><br><span class="line">&#125;</span><br><span class="line">@Dao</span><br><span class="line">@Repository</span><br><span class="line">public class BookDaoImpl implements BookDao &#123;</span><br><span class="line"> 	//注入 JdbcTemplate</span><br><span class="line"> 	@Autowired</span><br><span class="line"> 	private JdbcTemplate jdbcTemplate; </span><br><span class="line"> 	&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-添加"   >
          <a href="#2-添加" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-添加" class="headerlink" title="2.添加"></a>2.添加</h3>
      <p><strong>1</strong>、对应数据库创建实体类</p>
<p><strong>2</strong>、编写service <strong>和</strong> <strong>dao</strong></p>
<p>（1）在 dao 进行数据库添加操作</p>
<p>（2）调用 JdbcTemplate 对象里面 update 方法实现添加操作</p>
<p>​	update(String sql,Object…args)</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line"> 	<span class="comment">//注入 JdbcTemplate</span></span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line"> 	<span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"> 	<span class="comment">//添加的方法</span></span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">	 <span class="comment">//1 创建 sql 语句</span></span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line"> 	<span class="comment">//2 调用方法实现</span></span><br><span class="line">	Object[] args = &#123;book.getUserId(), book.getUsername(), book.getUstatus()&#125;;</span><br><span class="line"> 	<span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,args);</span><br><span class="line"> 	System.out.println(update);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>3、测试类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line"> 	<span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, </span><br><span class="line">	BookService.class);</span><br><span class="line"> 	<span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line"> 	book.setUserId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"> 	book.setUsername(<span class="string">&quot;java&quot;</span>);</span><br><span class="line"> 	book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"> 	bookService.addBook(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="3-修改和删除"   >
          <a href="#3-修改和删除" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-修改和删除" class="headerlink" title="3.修改和删除"></a>3.修改和删除</h3>
      <p>1.修改</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBook</span><span class="params">(Book book)</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line"> 	Object[] args = &#123;book.getUsername(), book.getUstatus(),book.getUserId()&#125;;</span><br><span class="line"> 	<span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, args);</span><br><span class="line"> 	System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>2.删除</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line"> 	<span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line"> 	System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-查询返回某个值"   >
          <a href="#4-查询返回某个值" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-查询返回某个值" class="headerlink" title="4.查询返回某个值"></a>4.查询返回某个值</h3>
      <p><strong>1</strong>、查询表里面有多少条记录，返回是某个值</p>
<p><strong>2</strong>、使用 <strong>JdbcTemplate</strong> 实现查询返回某个值代码</p>
<p>queryForObject（String aql, class<T> requiredType）</p>
<p> 第一个参数：sql 语句</p>
<p>第二个参数：返回类型 Class</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询表记录数</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book&quot;</span>;</span><br><span class="line"> 	<span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line"> 	<span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="5-查询返回对象"   >
          <a href="#5-查询返回对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-查询返回对象" class="headerlink" title="5.查询返回对象"></a>5.查询返回对象</h3>
      <p><strong>1</strong>、场景：查询图书列表分页</p>
<p>**2、调用 **JdbcTemplate <strong>方法实现查询返回集合</strong></p>
<p>​	query(String sql, RowMapper<T> rowMapper, Object… args)</p>
<p>​	第一个参数：sql 语句</p>
<pre><code> 第二个参数：RowMapper 是接口，针对返回不同类型数据，使用这个接口里面实现类完成数据封装
</code></pre>
<p>​	 第三个参数：sql 语句值</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询返回集合</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAllBook</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line"> 	<span class="comment">//调用方法</span></span><br><span class="line"> 	List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line"> 	<span class="keyword">return</span> bookList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="6-查询返回集合"   >
          <a href="#6-查询返回集合" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-查询返回集合" class="headerlink" title="6.查询返回集合"></a>6.查询返回集合</h3>
      <p><strong>1</strong>、批量操作：操作表里面多条记录</p>
<p><strong>2、</strong>JdbcTemplate 实现批量添加操作</p>
<p>batchUpdate(String sql, List&lt;Object[]&gt; batchArgs)</p>
<p>​		第一个参数：sql 语句</p>
<p>​	 	第二个参数：List 集合，添加多条记录数据</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询返回集合</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAllBook</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line"> 	<span class="comment">//调用方法</span></span><br><span class="line"> 	List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;Book&gt;(Book.class));</span><br><span class="line"> 	<span class="keyword">return</span> bookList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="7-批量操作"   >
          <a href="#7-批量操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#7-批量操作" class="headerlink" title="7.批量操作"></a>7.批量操作</h3>
      <p>1、批量操作：操作表里面多条记录</p>
<p>2、JdbcTemplate实现批量添加操作</p>
<p>​	batchUpdate(String sql, List&lt;Object[] batchArgs&gt;)</p>
<p>第一个参数：sql 语句</p>
<p>第二个参数：List 集合，添加多条记录数据</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量添加</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAddBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line"> 	<span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line"> 	System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//批量添加测试</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;3&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;4&quot;</span>,<span class="string">&quot;c++&quot;</span>,<span class="string">&quot;b&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;5&quot;</span>,<span class="string">&quot;MySQL&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用批量添加</span></span><br><span class="line">bookService.batchAdd(batchArgs);</span><br></pre></td></tr></table></div></figure>

<p>3、JdbcTemplate 实现批量修改操作</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量修改</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdateBook</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line"> 	<span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id=?&quot;</span>;</span><br><span class="line"> 	<span class="type">int</span>[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line"> 	System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//批量修改</span></span><br><span class="line">List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;<span class="string">&quot;java0909&quot;</span>,<span class="string">&quot;a3&quot;</span>,<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line">Object[] o2 = &#123;<span class="string">&quot;c++1010&quot;</span>,<span class="string">&quot;b4&quot;</span>,<span class="string">&quot;4&quot;</span>&#125;;</span><br><span class="line">Object[] o3 = &#123;<span class="string">&quot;MySQL1111&quot;</span>,<span class="string">&quot;c5&quot;</span>,<span class="string">&quot;5&quot;</span>&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">batchArgs.add(o3);</span><br><span class="line"><span class="comment">//调用方法实现批量修改</span></span><br><span class="line">bookService.batchUpdate(batchArgs);</span><br></pre></td></tr></table></div></figure>

<p>4、JdbcTemplate实现批量删除操作</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//批量删除</span><br><span class="line">@Override</span><br><span class="line">public void batchDeleteBook(List&lt;Object[]&gt; batchArgs) &#123;</span><br><span class="line"> 	String sql = &quot;delete from t_book where user_id=?&quot;;</span><br><span class="line"> 	int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line"> System.out.println(Arrays.toString(ints));</span><br><span class="line">&#125;</span><br><span class="line">//批量删除</span><br><span class="line">List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();</span><br><span class="line">Object[] o1 = &#123;&quot;3&quot;&#125;;</span><br><span class="line">Object[] o2 = &#123;&quot;4&quot;&#125;;</span><br><span class="line">batchArgs.add(o1);</span><br><span class="line">batchArgs.add(o2);</span><br><span class="line">//调用方法实现批量删除</span><br><span class="line">bookService.batchDelete(batchArgs);</span><br></pre></td></tr></table></div></figure>


        <h2 id="5-事务管理"   >
          <a href="#5-事务管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-事务管理" class="headerlink" title="5.事务管理"></a>5.事务管理</h2>
      
        <h3 id="1-事务概念"   >
          <a href="#1-事务概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-事务概念" class="headerlink" title="1.事务概念"></a>1.事务概念</h3>
      <p>1、什么事务</p>
<p>（1）事务是数据库操作最基本单元，逻辑上一组操作，要么都成功，如果有一个失败所有操作都失败</p>
<p>（2）典型场景：银行转账</p>
<p>* lucy 转账 100 元 给 mary</p>
<p>* lucy 少 100，mary 多 100</p>
<p>2、事务四个特性（ACID）</p>
<div class="table-container"><table>
<thead>
<tr>
<th>原子性</th>
<th>是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生</th>
</tr>
</thead>
<tbody><tr>
<td>一致性</td>
<td>事务必须使数据库从一个一致性状态换到另一个一致状态</td>
</tr>
<tr>
<td>隔离性</td>
<td>事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰</td>
</tr>
<tr>
<td>持久性</td>
<td>是指一个事务一旦被提交，它对数据库中的数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</td>
</tr>
</tbody></table></div>

        <h3 id="2-Spring事务管理介绍"   >
          <a href="#2-Spring事务管理介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Spring事务管理介绍" class="headerlink" title="2.Spring事务管理介绍"></a>2.Spring事务管理介绍</h3>
      <p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\事务操作环境.png"></p>
<p>1、创建数据库表，添加记录</p>
<p>2、创建service，搭建dao，完成对象创建和注入关系</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//（1）service 注入 dao，在 dao 注入 JdbcTemplate，在JdbcTemplate 注入 DataSource</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> 	<span class="comment">//注入 dao</span></span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line"> 	<span class="keyword">private</span> UserDao userDao; &#125;</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>3、在dao <strong>创建两个方法：多钱和少钱的方法，在</strong> <strong>service</strong> 创建方法（转账的方法）</p>
<p><strong>4</strong>、上面代码，如果正常执行没有问题的，但是如果代码执行过程中出现异常，有问题</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> accountMoney</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//开启事务</span></span><br><span class="line">        <span class="comment">//业务操作</span></span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line">        <span class="comment">//模拟异常</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line">        <span class="comment">//没有异常，提交事务</span></span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        <span class="comment">//出现异常，事务回滚</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="3-注解声明式事务"   >
          <a href="#3-注解声明式事务" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-注解声明式事务" class="headerlink" title="3.注解声明式事务"></a>3.注解声明式事务</h3>
      <p>1、在spring配置文件配置事务管理器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--创建事务管理器--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>2、在 spring 配置文件，开启事务注解</p>
<p>（1）在 spring 配置文件引入名称空间 tx</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">http://www.springframework.org/schema/aop</span><br></pre></td></tr></table></div></figure>

<p>（2）开启事务注解</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启事务注解--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>3、在 <strong>service</strong> <strong>类上面（或者</strong> <strong>service</strong> <strong>类里面方法上面）添加事务注解</strong></p>
<p>（1）@Transactional，这个注解添加到类上面，也可以添加方法上面</p>
<p>（2）如果把这个注解添加类上面，这个类里面所有的方法都添加事务</p>
<p>（3）如果把这个注解添加方法上面，为这个方法添加事务</p>

        <h3 id="4-声明式事务管理参数配置"   >
          <a href="#4-声明式事务管理参数配置" class="heading-link"><i class="fas fa-link"></i></a><a href="#4-声明式事务管理参数配置" class="headerlink" title="4.声明式事务管理参数配置"></a>4.声明式事务管理参数配置</h3>
      <p><strong>1</strong>、在service <strong>类上面添加注解</strong>@Transactional，在这个注解里面可以配置事务相关参数</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\事务参数配置.png"></p>
<p><strong>2、</strong>propagation：事务传播行为</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\事务传播行为.png"></p>
<p>七种传播行为</p>
<div class="table-container"><table>
<thead>
<tr>
<th>传播属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>REQUIRED</td>
<td>如果有事务在运行，当前的方法就在这个事务内运行，否则，就启动一个新事物，并在自己事务内运行。</td>
</tr>
<tr>
<td>REQUIRED_NEW</td>
<td>当前事务必须启动新事务，并在它自己的事务内运行，如果有事务正在运行，应该将它挂起</td>
</tr>
<tr>
<td>SUPPORTS</td>
<td>如果有事务在运行，当前的方法的方法就这这个事务内运行，否则它不可以运行在事务中</td>
</tr>
<tr>
<td>NOT_SUPPORTS</td>
<td>当前的方法不应该运行在事务中，如果有运行事务，将它挂起</td>
</tr>
<tr>
<td>MANDATORY</td>
<td>当前的方法不应该运行在事务中，如果有运行的事务，就抛出异常</td>
</tr>
<tr>
<td>NEVER</td>
<td>当前的方法不应该在运行在事务中，如果有运行的事务，就抛出异常</td>
</tr>
<tr>
<td>NESTED</td>
<td>如果有事务在运行，当前的方法就应该在这个事务的嵌套事务内运行，否则，就启动一个新事物，并在它自己事务内运行</td>
</tr>
</tbody></table></div>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span></span><br></pre></td></tr></table></div></figure>

<p><strong>3</strong>、ioslation：事务隔离级别</p>
<p>（1）事务有特性成为隔离性，多事务操作之间不会产生影响。不考虑隔离性产生很多问题</p>
<p>（2）有三个读问题：脏读、不可重复读、虚（幻）读</p>
<p>（3）脏读：一个未提交事务读取到另一个未提交事务的数据</p>
<p>（4）不可重复读：一个未提交事务读取到另一提交事务修改数据</p>
<p>（5）虚读：一个未提交事务读取到另一提交事务添加数据</p>
<p>（6）解决：通过设置事务隔离级别，解决读问题</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\解决读问题.png"></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.REPEABLE_READ)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span></span><br></pre></td></tr></table></div></figure>

<p><strong>4</strong>、timeout：超时时间</p>
<p>（1）事务需要在一定时间内进行提交，如果不提交进行回滚</p>
<p>（2）默认值是 -1 ，设置时间以秒单位进行计算</p>
<p><strong>5</strong>、readOnly：是否只读</p>
<p>（1）读：查询操作，写：添加修改删除操作</p>
<p>（2）readOnly 默认值 false，表示可以查询，可以添加修改删除操作</p>
<p>（3）设置 readOnly 值是 true，设置成 true 之后，只能查询</p>
<p><strong>6</strong>、rollbackFor：回滚</p>
<p>（1）设置出现哪些异常进行事务回滚</p>
<p><strong>7</strong>、noRollbackFor：不回滚</p>
<p>（1）设置出现哪些异常不进行事务回滚</p>

        <h3 id="5-XML声明式事务管理"   >
          <a href="#5-XML声明式事务管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#5-XML声明式事务管理" class="headerlink" title="5.XML声明式事务管理"></a>5.XML声明式事务管理</h3>
      <p><strong>1</strong>、在 <strong>spring</strong> <strong>配置文件中进行配置</strong></p>
<p>第一步 配置事务管理器</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1 创建事务管理器--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>第二步 配置通知</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--配置事务参数--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!--指定哪种规则的方法上面添加事务--&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;accountMoney&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>第三步 配置切入点和切面</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--配置切入点--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(*com.atguigu.spring5.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></div></figure>


        <h3 id="6-完全注解声明式事务管理"   >
          <a href="#6-完全注解声明式事务管理" class="heading-link"><i class="fas fa-link"></i></a><a href="#6-完全注解声明式事务管理" class="headerlink" title="6.完全注解声明式事务管理"></a>6.完全注解声明式事务管理</h3>
      <p><strong>1</strong>、创建配置类，使用配置类替代 <strong>xml</strong> <strong>配置文件</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.atguigu&quot;)</span> <span class="comment">//组件扫描</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span> <span class="comment">//开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line"> 	<span class="comment">//创建数据库连接池</span></span><br><span class="line"> 	<span class="meta">@Bean</span></span><br><span class="line"> 	<span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line"> 		<span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line"> 		dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"> 		dataSource.setUrl(<span class="string">&quot;jdbc:mysql:///user_db&quot;</span>);</span><br><span class="line"> 		dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"> 		dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"> 		<span class="keyword">return</span> dataSource;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="comment">//创建 JdbcTemplate 对象</span></span><br><span class="line"> 	<span class="meta">@Bean</span></span><br><span class="line"> 	<span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line"> 		<span class="comment">//到 ioc 容器中根据类型找到 dataSource</span></span><br><span class="line"> 		<span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line"> 		<span class="comment">//注入 dataSource</span></span><br><span class="line"> 		jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">		<span class="keyword">return</span> jdbcTemplate;</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="comment">//创建事务管理器</span></span><br><span class="line"> 	<span class="meta">@Bean</span></span><br><span class="line">	<span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line"> 		<span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line"> 		transactionManager.setDataSource(dataSource);</span><br><span class="line"> 		<span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h2 id="六、Spring5新特性"   >
          <a href="#六、Spring5新特性" class="heading-link"><i class="fas fa-link"></i></a><a href="#六、Spring5新特性" class="headerlink" title="六、Spring5新特性"></a>六、Spring5新特性</h2>
      
        <h3 id="1-Spring5框架新功能"   >
          <a href="#1-Spring5框架新功能" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-Spring5框架新功能" class="headerlink" title="1.Spring5框架新功能"></a>1.Spring5框架新功能</h3>
      <p>1、整个<strong>Spring5</strong> <strong>框架的代码基于</strong> <strong>Java8</strong>，运行时兼容 <strong>JDK9</strong>，许多不建议使用的类和方法在代码库中删除</p>
<p><strong>2、Spring 5.0 框架自带了通用的日志封装</strong> </p>
<p>（1）Spring5 已经移除 Log4jConfigListener，官方建议使用 Log4j2</p>
<p>（2）Spring5 框架整合 Log4j2</p>
<p>​	第一步 引入 jar 包</p>
<p>​	第二步 创建 log4j2.xml 配置文件</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configuration 后面的 status 用于设置 log4j2 自身内部的信息输出，可以不设置，</span></span><br><span class="line"><span class="comment">当设置成 trace 时，可以看到 log4j2 内部各种详细输出--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--先定义所有的 appender--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!--输出日志信息到控制台--&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line"> 			<span class="comment">&lt;!--控制日志输出的格式--&gt;</span></span><br><span class="line"> 			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--然后定义 logger，只有定义 logger 并引入的 appender，appender 才会生效--&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!--root：用于指定项目的根日志，如果没有单独指定 Logger，则会使用 root 作为默认的日志输出--&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line"> 			<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p><strong>3</strong>、Spring5 <strong>框架核心容器</strong>支持@Nullable <strong>注解</strong></p>
<p>（1）@Nullable 注解可以使用在方法上面，属性上面，参数上面，<strong>表示方法返回可以为空，属性值可以为空，参数值可以为空</strong></p>
<p>（2）注解用在方法上面，<strong>方法返回值可以为空</strong></p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line">String <span class="title function_">getId</span><span class="params">()</span>;</span><br></pre></td></tr></table></div></figure>

<p>（3）注解使用在方法参数里面，<strong>方法参数可以为空</strong></p>
<p>（4）注解使用在属性上面，<strong>属性值可以为空</strong></p>
<p>**4、Spring5 **核心容器支持函数式风格GenericApplicationContext</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数式风格创建对象，交给 spring 进行管理</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGenericApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="comment">//1 创建 GenericApplicationContext 对象</span></span><br><span class="line"> 	<span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line"> 	<span class="comment">//2 调用 context 的方法对象注册</span></span><br><span class="line"> 	context.refresh();</span><br><span class="line"> 	context.registerBean(<span class="string">&quot;user1&quot;</span>,User.class,() -&gt; <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line"> 	<span class="comment">//3 获取在 spring 注册的对象</span></span><br><span class="line"> 	<span class="comment">// User user = (User)context.getBean(&quot;com.atguigu.spring5.test.User&quot;);</span></span><br><span class="line"> 	<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User)context.getBean(<span class="string">&quot;user1&quot;</span>);</span><br><span class="line"> 	System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>5</strong>、Spring5 <strong>支持整合</strong> JUnit</p>
<p>（1）整合 JUnit4</p>
<p>第一步 引入 Spring 相关针对测试依赖</p>
<p>第二步 创建测试类，使用注解方式完成</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span> <span class="comment">//单元测试框架</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span> <span class="comment">//加载配置文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest4</span> &#123;</span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line"> 	<span class="keyword">private</span> UserService userService;</span><br><span class="line"> 	<span class="meta">@Test</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line"> 	userService.accountMoney();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（2）Spring5 整合 JUnit5</p>
<p>​	第一步 引入 JUnit5 的 jar 包</p>
<p>​	第二步 创建测试类，使用注解完成</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExtendWith(SpringExtension.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest5</span> &#123;</span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line"> 	<span class="keyword">private</span> UserService userService;</span><br><span class="line"> 	<span class="meta">@Test</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line"> 	userService.accountMoney();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（3）使用一个复合注解替代上面两个注解完成整合</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:bean1.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JTest5</span> &#123;</span><br><span class="line"> 	<span class="meta">@Autowired</span></span><br><span class="line"> 	<span class="keyword">private</span> UserService userService;</span><br><span class="line"> 	<span class="meta">@Test</span></span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line"> 	userService.accountMoney();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-Webflux"   >
          <a href="#2-Webflux" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Webflux" class="headerlink" title="2.Webflux"></a>2.Webflux</h3>
      
        <h4 id="1、SpringWebflux介绍"   >
          <a href="#1、SpringWebflux介绍" class="heading-link"><i class="fas fa-link"></i></a><a href="#1、SpringWebflux介绍" class="headerlink" title="1、SpringWebflux介绍"></a>1、SpringWebflux<strong>介绍</strong></h4>
      <p>（1）是 Spring5 添加新的模块，用于 web 开发的，功能和 SpringMVC 类似的，Webflux 使用当前一种比较流程响应式编程出现的框架。</p>
<p>（2）使用传统 web 框架，比如 SpringMVC，这些基于 Servlet 容器,Webflux 是一种异步非阻塞的框架，异步非阻塞的框架在 Servlet3.1 以后才支持，核心是基于 Reactor 的相关 API 实现的。</p>
<p>（3）解释什么是异步非阻塞</p>
<div class="table-container"><table>
<thead>
<tr>
<th>异步</th>
<th>调用者发送请求，如果等着对方回应之后才去做其他事情就是同步</th>
</tr>
</thead>
<tbody><tr>
<td>同步</td>
<td>如果发送请求之后不等着对方回应就去做其他事情就是异步</td>
</tr>
<tr>
<td>非阻塞</td>
<td>调用者发送请求，如果等着对方回应之后才去做其他事情就是同步，如果发送请求之后不等着对方回应就去做其他事情就是异步</td>
</tr>
<tr>
<td>阻塞</td>
<td>被调用者受到请求之后，做完请求任务之后才给出反馈就是阻塞，受到请求之后马上给出反馈然后再去做事情就是非阻塞</td>
</tr>
</tbody></table></div>
<p>** 上面都是针对对象不一样</p>
<p>（4）Webflux 特点：</p>
<p>​	第一 非阻塞式：在有限资源下，提高系统吞吐量和伸缩性，以 Reactor 为基础实现响应式编程</p>
<p>​	第二 函数式编程：Spring5 框架基于 java8，Webflux 使用 Java8 函数式编程方式实现路由请求</p>
<p>（5）比较 SpringMVC</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\比较SpringMVC.png"></p>
<p>第一 两个框架都可以使用注解方式，都运行在 Tomet 等容器中</p>
<p>第二 SpringMVC 采用命令式编程，Webflux 采用异步响应式编程</p>

        <h4 id="2、响应式编程（Java-实现）"   >
          <a href="#2、响应式编程（Java-实现）" class="heading-link"><i class="fas fa-link"></i></a><a href="#2、响应式编程（Java-实现）" class="headerlink" title="2、响应式编程（Java 实现）"></a><strong>2</strong>、响应式编程（Java <strong>实现）</strong></h4>
      <p>（1）什么是响应式编程</p>
<p>​	响应式编程是一种面向<strong>数据流</strong>和变化传播的编程范式。这意味着可以在编程语言中很方便地表达静态或动态的数据流，而相关的计算模型会自动将变化的值通过数据流进行传播。电子表格程序就是响应式编程的一个例子。单元格可以包含字面值或类似”&#x3D;B1+C1”的公式，而包含公式的单元格的值会依据其他单元格的值的变化而变化。</p>
<p>（2）Java8 及其之前版本</p>
<p> 提供的观察者模式两个类 Observer 和 Observable</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObserverDemo</span> <span class="keyword">extends</span> <span class="title class_">Observable</span> &#123;</span><br><span class="line"> 	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> 		<span class="type">ObserverDemo</span> <span class="variable">observer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObserverDemo</span>();</span><br><span class="line"> 		<span class="comment">//添加观察者</span></span><br><span class="line"> 		observer.addObserver((o,arg)-&gt;&#123;</span><br><span class="line"> 			System.out.println(<span class="string">&quot;发生变化&quot;</span>);</span><br><span class="line"> &#125;);</span><br><span class="line"> 		observer.addObserver((o,arg)-&gt;&#123;</span><br><span class="line"> 			System.out.println(<span class="string">&quot;手动被观察者通知，准备改变&quot;</span>);</span><br><span class="line"> &#125;);</span><br><span class="line"> 		observer.setChanged(); <span class="comment">//数据变化</span></span><br><span class="line"> 		observer.notifyObservers(); <span class="comment">//通知</span></span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


        <h4 id="3、响应式编程（Reactor实现）"   >
          <a href="#3、响应式编程（Reactor实现）" class="heading-link"><i class="fas fa-link"></i></a><a href="#3、响应式编程（Reactor实现）" class="headerlink" title="3、响应式编程（Reactor实现）"></a>3、响应式编程（Reactor实现）</h4>
      <p>（1）响应式编程操作中，Reactor 是满足 Reactive 规范框架</p>
<p>（2）Reactor 有两个核心类，Mono和 Flux，这两个类实现接口 Publisher，提供丰富操作符。Flux对象实现发布者，返回 N 个元素；Mono 实现发布者，返回 0 或者 1 个元素</p>
<p>（3）Flux 和 Mono 都是数据流的发布者，使用 Flux 和 Mono 都可以发出三种数据信号：元素值，错误信号，完成信号，错误信号和完成信号都代表终止信号，终止信号用于告诉订阅者数据流结束了，错误信号终止数据流同时把错误信息传递给订阅者</p>
<p>（4）代码演示 Flux 和 Mono</p>
<p>​	第一步 引入依赖</p>
<figure class="highlight xml"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.projectreactor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>reactor-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></div></figure>

<p>​	第二步 编程代码</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> 	<span class="comment">//just 方法直接声明</span></span><br><span class="line"> 	Flux.just(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"> 	Mono.just(<span class="number">1</span>);</span><br><span class="line"> 	<span class="comment">//其他的方法</span></span><br><span class="line"> 	Integer[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"> 	Flux.fromArray(array);</span><br><span class="line"> </span><br><span class="line"> 	List&lt;Integer&gt; list = Arrays.asList(array);</span><br><span class="line"> 	Flux.fromIterable(list);</span><br><span class="line">    </span><br><span class="line"> 	Stream&lt;Integer&gt; stream = list.stream();</span><br><span class="line"> 	Flux.fromStream(stream);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（5）三种信号特点</p>
<p>​	* 错误信号和完成信号都是终止信号，不能共存的</p>
<p>​	* 如果没有发送任何元素值，而是直接发送错误或者完成信号，表示是空数据流</p>
<p>​	* 如果没有错误信号，没有完成信号，表示是无限数据流</p>
<p>（6）调用 just 或者其他方法只是声明数据流，数据流并没有发出，只有进行订阅之后才会触发数据流，不订阅什么都不会发生的</p>
<p>（7）操作符</p>
<p>对数据流进行一道道操作，成为操作符，比如工厂流水线</p>
<p>第一 map 元素映射为新元素</p>
<p>第二 flatMap 元素映射为流</p>
<p> 把每个元素转换流，把转换之后多个流合并大的流</p>

        <h4 id="4、SpringWebflux-执行流程和核心-API"   >
          <a href="#4、SpringWebflux-执行流程和核心-API" class="heading-link"><i class="fas fa-link"></i></a><a href="#4、SpringWebflux-执行流程和核心-API" class="headerlink" title="4、SpringWebflux 执行流程和核心 API"></a>4、SpringWebflux 执行流程和核心 API</h4>
      <p>SpringWebflux 基于 Reactor，默认使用容器是 Netty，Netty 是高性能的 NIO 框架，异步非阻塞的框架</p>
<p>（1）Netty</p>
<p>（2）SpringWebflux 执行过程和 SpringMVC 相似的</p>
<p>​	* SpringWebflux 核心控制器 DispatchHandler，实现接口 WebHandler</p>
<p>​	* 接口 WebHandler 有一个方法</p>
<p>（3）SpringWebflux 里面 DispatcherHandler，负责请求的处理</p>
<p>* HandlerMapping：请求查询到处理的方法</p>
<p>* HandlerAdapter：真正负责请求处理</p>
<p>* HandlerResultHandler：响应结果处理</p>
<p>（4）SpringWebflux 实现函数式编程，两个接口：RouterFunction（路由处理）和 HandlerFunction（处理函数）</p>

        <h4 id="5、SpringWebflux（基于注解编程模型"   >
          <a href="#5、SpringWebflux（基于注解编程模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#5、SpringWebflux（基于注解编程模型" class="headerlink" title="5、SpringWebflux（基于注解编程模型)"></a>5、SpringWebflux（基于注解编程模型)</h4>
      <p>​	SpringWebflux 实现方式有两种：注解编程模型和函数式编程模型</p>
<p>​	使用注解编程模型方式，和之前 SpringMVC 使用相似的，只需要把相关依赖配置到项目中，SpringBoot 自动配置相关运行容器，默认情况下使用 Netty 服务器</p>
<p>第一步 创建 SpringBoot 工程，引入 Webflux 依赖</p>
<p>第二步 配置启动端口号</p>
<p><img src="D:\Users\沐凌零\AppData\Local\Programs\Typora\img\启动端口号.png"></p>
<p>第三步 创建包和相关类实体类</p>
<p>创建接口定义操作的方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户操作接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> 	<span class="comment">//根据 id 查询用户</span></span><br><span class="line"> 	Mono&lt;User&gt; <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"> 	<span class="comment">//查询所有用户</span></span><br><span class="line"> 	Flux&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span>;</span><br><span class="line"> 	<span class="comment">//添加用户</span></span><br><span class="line"> 	Mono&lt;Void&gt; <span class="title function_">saveUserInfo</span><span class="params">(Mono&lt;User&gt; user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>接口实现类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"> 	<span class="comment">//创建 map 集合存储数据</span></span><br><span class="line"> 	<span class="keyword">private</span> <span class="keyword">final</span> Map&lt;Integer,User&gt; users = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"> 	<span class="keyword">public</span> <span class="title function_">UserServiceImpl</span><span class="params">()</span> &#123;</span><br><span class="line"> 		<span class="built_in">this</span>.users.put(<span class="number">1</span>,<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;lucy&quot;</span>,<span class="string">&quot;nan&quot;</span>,<span class="number">20</span>));</span><br><span class="line"> 		<span class="built_in">this</span>.users.put(<span class="number">2</span>,<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;mary&quot;</span>,<span class="string">&quot;nv&quot;</span>,<span class="number">30</span>));</span><br><span class="line"> 		<span class="built_in">this</span>.users.put(<span class="number">3</span>,<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;nv&quot;</span>,<span class="number">50</span>));</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="comment">//根据 id 查询</span></span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> Mono&lt;User&gt; <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"> 		<span class="keyword">return</span> Mono.justOrEmpty(<span class="built_in">this</span>.users.get(id));</span><br><span class="line">        <span class="comment">//Mono.justOrEmpty		从一个 Optional 对象或可能为 null 的对象中创建 Mono。只有 Optional 对象中包含值或对象不为 null 时，Mono 序列才产生对应的元素。</span></span><br><span class="line"> 	&#125;</span><br><span class="line"> 	<span class="comment">//查询多个用户</span></span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> Flux&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">()</span> &#123;</span><br><span class="line"> 		<span class="keyword">return</span> Flux.fromIterable(<span class="built_in">this</span>.users.values());</span><br><span class="line">        <span class="comment">//Flux.fromIterable		可以从一个数组、Iterable 对象或 Stream 对象中创建 Flux 对象</span></span><br><span class="line"> 	&#125;</span><br><span class="line">    <span class="comment">//添加用户</span></span><br><span class="line"> 	<span class="meta">@Override</span></span><br><span class="line"> 	<span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">saveUserInfo</span><span class="params">(Mono&lt;User&gt; userMono)</span> &#123;</span><br><span class="line"> 		<span class="keyword">return</span> userMono.doOnNext(person -&gt; &#123;</span><br><span class="line"> 			<span class="comment">//向 map 集合里面放值</span></span><br><span class="line"> 			<span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> users.size()+<span class="number">1</span>;</span><br><span class="line"> 			users.put(id,person);</span><br><span class="line"> 		&#125;).thenEmpty(Mono.empty());</span><br><span class="line"> 	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>创建 controller</p>
<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class UserController &#123;</span><br><span class="line"> 	//注入 service</span><br><span class="line"> 	@Autowired</span><br><span class="line"> 	private UserService userService;</span><br><span class="line"> 	//id 查询</span><br><span class="line"> 	@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span><br><span class="line"> 	public Mono&lt;User&gt; geetUserId(@PathVariable int id) &#123;</span><br><span class="line"> 		return userService.getUserById(id);</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	//查询所有</span><br><span class="line"> 	@GetMapping(&quot;/user&quot;)</span><br><span class="line"> 	public Flux&lt;User&gt; getUsers() &#123;</span><br><span class="line"> 		return userService.getAllUser();</span><br><span class="line"> 	&#125;</span><br><span class="line"> 	//添加</span><br><span class="line"> 	@PostMapping(&quot;/saveuser&quot;)</span><br><span class="line"> 	public Mono&lt;Void&gt; saveUser(@RequestBody User user) &#123;</span><br><span class="line"> 		Mono&lt;User&gt; userMono = Mono.just(user);</span><br><span class="line"> 		return userService.saveUserInfo(userMono);</span><br><span class="line"> 	&#125; </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></div></figure>

<p>说明</p>
<p>SpringMVC 方式实现，同步阻塞的方式，基于 SpringMVC+Servlet+Tomcat</p>
<p>SpringWebflux 方式实现，异步非阻塞 方式，基于SpringWebflux+Reactor+Netty</p>

        <h4 id="6、SpringWebflux（基于函数式编程模型）"   >
          <a href="#6、SpringWebflux（基于函数式编程模型）" class="heading-link"><i class="fas fa-link"></i></a><a href="#6、SpringWebflux（基于函数式编程模型）" class="headerlink" title="6、SpringWebflux（基于函数式编程模型）"></a><strong>6</strong>、SpringWebflux（基于函数式编程模型）</h4>
      <p>（1）在使用函数式编程模型操作时候，需要自己初始化服务器</p>
<p>（2）基于函数式编程模型时候，有两个核心接口：RouterFunction（实现路由功能，请求转发给对应的 handler）和 HandlerFunction（处理请求生成响应的函数）。核心任务定义两个函数式接口的实现并且启动需要的服务器。</p>
<p>（ 3 ） SpringWebflux 请 求 和 响 应 不 再 是 ServletRequest 和 ServletResponse ，而是ServerRequest 和 ServerResponse</p>
<p>第一步 把注解编程模型工程复制一份 ，保留 entity 和 service 内容</p>
<p>第二步 创建 Handler（具体实现方法）</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHandler</span> &#123;</span><br><span class="line"> 	<span class="keyword">private</span> <span class="keyword">final</span> UserService userService;</span><br><span class="line"> 	<span class="keyword">public</span> <span class="title function_">UserHandler</span><span class="params">(UserService userService)</span> &#123;</span><br><span class="line"> 		<span class="built_in">this</span>.userService = userService;</span><br><span class="line"> &#125;</span><br><span class="line"> 	<span class="comment">//根据 id 查询</span></span><br><span class="line"> <span class="keyword">public</span> Mono&lt;ServerResponse&gt; <span class="title function_">getUserById</span><span class="params">(ServerRequest request)</span> &#123;</span><br><span class="line"> 	<span class="comment">//获取 id 值</span></span><br><span class="line"> 	<span class="type">int</span> <span class="variable">userId</span> <span class="operator">=</span> Integer.valueOf(request.pathVariable(<span class="string">&quot;id&quot;</span>));</span><br><span class="line"> 	<span class="comment">//空值处理</span></span><br><span class="line"> 	Mono&lt;ServerResponse&gt; notFound = ServerResponse.notFound().build();</span><br><span class="line"> 	<span class="comment">//调用 service 方法得到数据</span></span><br><span class="line"> 	Mono&lt;User&gt; userMono = <span class="built_in">this</span>.userService.getUserById(userId);</span><br><span class="line">	<span class="comment">//把 userMono 进行转换返回</span></span><br><span class="line"> 	<span class="comment">//使用 Reactor 操作符 flatMap</span></span><br><span class="line"> 	<span class="keyword">return</span>  </span><br><span class="line">        userMono</span><br><span class="line">        .flatMap(person -&gt; </span><br><span class="line">                 ServerResponse.ok().contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">                 .body(fromObject(person)))</span><br><span class="line">        		 .switchIfEmpty(notFound);</span><br><span class="line"> 	&#125;</span><br><span class="line"> <span class="comment">//查询所有</span></span><br><span class="line"> <span class="keyword">public</span> Mono&lt;ServerResponse&gt; <span class="title function_">getAllUsers</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="comment">//调用 service 得到结果</span></span><br><span class="line"> 	Flux&lt;User&gt; users = <span class="built_in">this</span>.userService.getAllUser();</span><br><span class="line"> 	<span class="keyword">return</span> ServerResponse.ok().contentType(MediaType.APPLICATION_JSON).body(users,User.class);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//添加</span></span><br><span class="line"> <span class="keyword">public</span> Mono&lt;ServerResponse&gt; <span class="title function_">saveUser</span><span class="params">(ServerRequest request)</span> &#123;</span><br><span class="line"> 	<span class="comment">//得到 user 对象</span></span><br><span class="line"> 	Mono&lt;User&gt; userMono = request.bodyToMono(User.class);</span><br><span class="line"> 	<span class="keyword">return</span> ServerResponse.ok().build(<span class="built_in">this</span>.userService.saveUserInfo(userMono));</span><br><span class="line"> 	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>第三步 初始化服务器，编写 Router</p>
<p>创建路由的方法</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1 创建 Router 路由</span></span><br><span class="line"><span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title function_">routingFunction</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="comment">//创建 hanler 对象</span></span><br><span class="line"> 	<span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"> 	<span class="type">UserHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserHandler</span>(userService);</span><br><span class="line"> 	<span class="comment">//设置路由</span></span><br><span class="line"> 	<span class="keyword">return</span> RouterFunctions.route(</span><br><span class="line"> </span><br><span class="line">GET(<span class="string">&quot;/users/&#123;id&#125;&quot;</span>).and(accept(APPLICATION_JSON)),handler::getUserById).andRoute(GET(<span class="string">&quot;/users&quot;</span>).and(accept(APPLICATION_JSON)),handler::getAllUsers);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>创建服务器完成适配</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2 创建服务器完成适配</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createReactorServer</span><span class="params">()</span> &#123;</span><br><span class="line"> 	<span class="comment">//路由和 handler 适配</span></span><br><span class="line"> 	RouterFunction&lt;ServerResponse&gt; route = routingFunction();</span><br><span class="line"> 	<span class="type">HttpHandler</span> <span class="variable">httpHandler</span> <span class="operator">=</span> toHttpHandler(route);</span><br><span class="line"> 	<span class="type">ReactorHttpHandlerAdapter</span> <span class="variable">adapter</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">	<span class="title class_">ReactorHttpHandlerAdapter</span>(httpHandler);</span><br><span class="line"> 	<span class="comment">//创建服务器</span></span><br><span class="line"> 	<span class="type">HttpServer</span> <span class="variable">httpServer</span> <span class="operator">=</span> HttpServer.create();</span><br><span class="line"> 	httpServer.handle(adapter).bindNow();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>最终调用</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"> 	<span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Server</span>();</span><br><span class="line"> 	server.createReactorServer();</span><br><span class="line"> 	System.out.println(<span class="string">&quot;enter to exit&quot;</span>);</span><br><span class="line"> 	System.in.read();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>（4）使用 WebClient 调用</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> 		<span class="comment">//调用服务器地址</span></span><br><span class="line">	 	<span class="type">WebClient</span> <span class="variable">webClient</span> <span class="operator">=</span> WebClient.create(<span class="string">&quot;http://127.0.0.1:5794&quot;</span>);</span><br><span class="line"> 	<span class="comment">//根据 id 查询</span></span><br><span class="line"> 	<span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line"> 	<span class="type">User</span> <span class="variable">userresult</span> <span class="operator">=</span> webClient.get().uri(<span class="string">&quot;/users/&#123;id&#125;&quot;</span>, id)</span><br><span class="line"> 		.accept(MediaType.APPLICATION_JSON).retrieve().bodyToMono(User.class).block();</span><br><span class="line"> 	System.out.println(userresult.getName());</span><br><span class="line"> 	<span class="comment">//查询所有</span></span><br><span class="line"> 	Flux&lt;User&gt; results = webClient.get().uri(<span class="string">&quot;/users&quot;</span>)							  . 		.accept(MediaType.APPLICATION_JSON).retrieve().bodyToFlux(User.class);	</span><br><span class="line"> 	results.map(stu -&gt; stu.getName()).buffer().doOnNext(System.out::println).blockFirst();</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>






        <h2 id="七、其他"   >
          <a href="#七、其他" class="heading-link"><i class="fas fa-link"></i></a><a href="#七、其他" class="headerlink" title="七、其他"></a>七、其他</h2>
      
        <h3 id="1-注解"   >
          <a href="#1-注解" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-注解" class="headerlink" title="1.注解"></a>1.注解</h3>
      <p>​	（1）@Component</p>
<p>​	（2）@Service</p>
<p>​	（3）@Controller</p>
<p>​	（4）@Repository</p>
<p>上面四个注解功能是一样的，都可以用来创建 bean 实例</p>
<div class="table-container"><table>
<thead>
<tr>
<th>前置通知</th>
<th>@Before</th>
</tr>
</thead>
<tbody><tr>
<td>后置通知</td>
<td>@AfterReturning</td>
</tr>
<tr>
<td>环绕通知</td>
<td>@Around</td>
</tr>
<tr>
<td>异常通知</td>
<td>@AfterThrowing</td>
</tr>
<tr>
<td>最终通知</td>
<td>@After</td>
</tr>
</tbody></table></div>

        <h3 id="2-Mono和Flux的用法详解"   >
          <a href="#2-Mono和Flux的用法详解" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-Mono和Flux的用法详解" class="headerlink" title="2.Mono和Flux的用法详解"></a>2.Mono和Flux的用法详解</h3>
      
        <h4 id="2-1Flux"   >
          <a href="#2-1Flux" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-1Flux" class="headerlink" title="2.1Flux"></a>2.1Flux</h4>
      <p>just			可以指定序列中包含的全部元素。创建出来的 Flux 序列在发布这些元素之后会自动结束。<br>fromArray()，fromIterable()和 fromStream()	</p>
<p>可以从一个数组、Iterable 对象或 Stream 对象中创建 Flux 对象。<br>empty()<br>创建一个不包含任何元素，只发布结束消息的序列,在响应式编程中，流的传递是基于元素的，empty表示没有任何元素，所以不会进行后续传递，需要用switchIfEmpty等处理</p>
<p>error(Throwable error)<br>创建一个只包含错误消息的序列。</p>
<p>never()<br>创建一个不包含任何消息通知的序列</p>

        <h4 id="2-2Mono"   >
          <a href="#2-2Mono" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-2Mono" class="headerlink" title="2.2Mono"></a>2.2Mono</h4>
      <p>just</p>
<p>创建对象</p>
<p>empty</p>
<p>创建一个不包含任何元素，只发布结束消息的序列</p>
<p>error()</p>
<p>抛出异常</p>
<p>justOrEmpty(Optional&lt;? extends T&gt; data)和 justOrEmpty(T data)<br>从一个 Optional 对象或可能为 null 的对象中创建 Mono。只有 Optional 对象中包含值或对象不为 null 时，Mono 序列才产生对应的元素。</p>
</div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring5-%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">
          Spring5 框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Spring%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">
          一、Spring框架概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81IOC%E5%AE%B9%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">
          二、IOC容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-IOC%E6%A6%82%E5%BF%B5%E5%92%8C%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">
          1.IOC概念和原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-BeanFactory%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.2.</span> <span class="toc-text">
          2.BeanFactory接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-IOC%E6%93%8D%E4%BD%9CBean%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">
          3.IOC操作Bean管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">
          3.1概念</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF-Bean-%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.3.1.1.</span> <span class="toc-text">
          1、什么是 Bean 管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81Bean-%E7%AE%A1%E7%90%86%E6%93%8D%E4%BD%9C%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.3.1.2.</span> <span class="toc-text">
          2、Bean 管理操作有两种方式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2%E5%9F%BA%E4%BA%8E-xml-%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">
          3.2基于 xml 方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.3.2.1.</span> <span class="toc-text">
          1.创建对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.3.2.2.</span> <span class="toc-text">
          2.注入属性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1%E4%BD%BF%E7%94%A8set%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.3.2.2.1.</span> <span class="toc-text">
          2.1使用set方法进行注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2%E4%BD%BF%E7%94%A8%E6%9C%89%E5%8F%82%E6%95%B0%E6%9E%84%E9%80%A0%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.3.2.2.2.</span> <span class="toc-text">
          2.2使用有参数构造进行注入</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3p-%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E6%B3%A8%E5%85%A5%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">1.2.3.2.2.3.</span> <span class="toc-text">
          2.3p 名称空间注入（了解）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3xml-%E6%B3%A8%E5%85%A5%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.3.2.2.4.</span> <span class="toc-text">
          3.3xml 注入其他类型属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="toc-number">1.2.3.2.3.</span> <span class="toc-text">
          1、字面量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7%E5%A4%96%E9%83%A8-bean"><span class="toc-number">1.2.3.2.4.</span> <span class="toc-text">
          2、注入属性外部 bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7%E5%86%85%E9%83%A8-bean"><span class="toc-number">1.2.3.2.5.</span> <span class="toc-text">
          3、注入属性内部 bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7-%E7%BA%A7%E8%81%94%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.3.2.6.</span> <span class="toc-text">
          4、注入属性-级联赋值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-xml-%E6%B3%A8%E5%85%A5%E9%9B%86%E5%90%88%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.3.2.7.</span> <span class="toc-text">
          5.xml 注入集合属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-FactoryBean"><span class="toc-number">1.2.3.2.8.</span> <span class="toc-text">
          6.FactoryBean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-bean%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.2.3.2.9.</span> <span class="toc-text">
          7.bean作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.2.3.2.10.</span> <span class="toc-text">
          8.bean生命周期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-xml%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">1.2.3.2.11.</span> <span class="toc-text">
          9.xml自动装配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.2.12.</span> <span class="toc-text">
          10.外部属性文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">
          4.基于注解方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.2.3.3.1.</span> <span class="toc-text">
          1、什么是注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81Spring%E9%92%88%E5%AF%B9-Bean-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.2.3.3.2.</span> <span class="toc-text">
          2、Spring针对 Bean 管理中创建对象提供注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-number">1.2.3.3.3.</span> <span class="toc-text">
          3、基于注解方式实现对象创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%BB%86%E8%8A%82%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.3.3.4.</span> <span class="toc-text">
          4.开启组件扫描细节配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.3.3.5.</span> <span class="toc-text">
          5.基于注解方式实现属性注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.2.3.3.6.</span> <span class="toc-text">
          6、完全注解开发</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Aop"><span class="toc-number">1.3.</span> <span class="toc-text">
          三、Aop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text">
          1.概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">
          2.底层原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-jdk%E5%8A%A8%E6%80%81%E5%B8%A6%E7%90%86"><span class="toc-number">1.3.3.</span> <span class="toc-text">
          3.jdk动态带理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.3.4.</span> <span class="toc-text">
          4.术语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.3.5.</span> <span class="toc-text">
          5.准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-AspectJ-%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.3.6.</span> <span class="toc-text">
          6.AspectJ 注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Aspectj%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.7.</span> <span class="toc-text">
          7.Aspectj配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81jdbcTemplate"><span class="toc-number">1.4.</span> <span class="toc-text">
          四、jdbcTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E5%BF%B5%E5%92%8C%E5%87%86%E5%A4%87"><span class="toc-number">1.4.1.</span> <span class="toc-text">
          1.概念和准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.4.2.</span> <span class="toc-text">
          2.添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">
          3.修改和删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC"><span class="toc-number">1.4.4.</span> <span class="toc-text">
          4.查询返回某个值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.5.</span> <span class="toc-text">
          5.查询返回对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88"><span class="toc-number">1.4.6.</span> <span class="toc-text">
          6.查询返回集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.7.</span> <span class="toc-text">
          7.批量操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.</span> <span class="toc-text">
          5.事务管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="toc-number">1.5.1.</span> <span class="toc-text">
          1.事务概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Spring%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.5.2.</span> <span class="toc-text">
          2.Spring事务管理介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.5.3.</span> <span class="toc-text">
          3.注解声明式事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.4.</span> <span class="toc-text">
          4.声明式事务管理参数配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-XML%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.5.</span> <span class="toc-text">
          5.XML声明式事务管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.6.</span> <span class="toc-text">
          6.完全注解声明式事务管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Spring5%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.6.</span> <span class="toc-text">
          六、Spring5新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Spring5%E6%A1%86%E6%9E%B6%E6%96%B0%E5%8A%9F%E8%83%BD"><span class="toc-number">1.6.1.</span> <span class="toc-text">
          1.Spring5框架新功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Webflux"><span class="toc-number">1.6.2.</span> <span class="toc-text">
          2.Webflux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81SpringWebflux%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">
          1、SpringWebflux介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%88Java-%E5%AE%9E%E7%8E%B0%EF%BC%89"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">
          2、响应式编程（Java 实现）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%88Reactor%E5%AE%9E%E7%8E%B0%EF%BC%89"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">
          3、响应式编程（Reactor实现）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81SpringWebflux-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%92%8C%E6%A0%B8%E5%BF%83-API"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">
          4、SpringWebflux 执行流程和核心 API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81SpringWebflux%EF%BC%88%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.6.2.5.</span> <span class="toc-text">
          5、SpringWebflux（基于注解编程模型)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81SpringWebflux%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B%EF%BC%89"><span class="toc-number">1.6.2.6.</span> <span class="toc-text">
          6、SpringWebflux（基于函数式编程模型）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%85%B6%E4%BB%96"><span class="toc-number">1.7.</span> <span class="toc-text">
          七、其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.7.1.</span> <span class="toc-text">
          1.注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Mono%E5%92%8CFlux%E7%9A%84%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.7.2.</span> <span class="toc-text">
          2.Mono和Flux的用法详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1Flux"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">
          2.1Flux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2Mono"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">
          2.2Mono</span></a></li></ol></li></ol></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/assest/avatar.jpg" alt="avatar"></div><p class="sidebar-ov-author__text">记得一键三连哦~</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://gitee.com/mu-lingling" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="2623657073" target="_blank" rel="noopener" data-popover="QQ" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">3</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">2</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">4</div><div class="sidebar-ov-state-item__name">标签</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2022</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>mll</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body><!-- 页面点击小红心 --></html><script type="text/javascript" src="/js/love.js"></script>